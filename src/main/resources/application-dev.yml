spring:
  application:
    name: personal-finance-server
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/personal_finance}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:root}
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
    open-in-view: false
  flyway:
    enabled: true
    locations: classpath:db/migration
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  mail:
    enabled: ${EMAIL_ENABLED:true}
    host: ${EMAIL_HOST:smtp.gmail.com}
    port: ${EMAIL_PORT:587}
    username: ${EMAIL_USERNAME:}
    password: ${EMAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000
    from: ${EMAIL_FROM:no-reply@personalfinance.com}

server:
  port: ${SERVER_PORT:8080}

logging:
  level:
    org.springframework: INFO
    com.personalfin.server: DEBUG
    org.springframework.security: DEBUG

reminder:
  scheduler:
    cron: "0 0 6 * * *"
    zone-id: "Asia/Kolkata"
  notification:
    days-before: 3

expense:
  categorizer:
    default-category: Uncategorized
    match-confidence: 0.92
    fallback-confidence: 0.35
    categories:
      Food:
        - swiggy
        - zomato
        - restaurant
      Travel:
        - uber
        - ola
        - metro
      Utilities:
        - electricity
        - broadband
        - dth
      Entertainment:
        - netflix
        - spotify
        - prime video
  analytics:
    heatmap:
      thresholds:
        - 500
        - 1500
        - 3000
        - 6000

budget:
  coach-threshold-percent: 10

jwt:
  secret: ${JWT_SECRET:dev-secret-key-change-in-production-minimum-256-bits-required-for-hmac-sha-256-algorithm}
  expiration: ${JWT_EXPIRATION:86400000}
  issuer: ${JWT_ISSUER:personal-finance-server}

rate-limit:
  auth-requests-per-minute: ${RATE_LIMIT_AUTH:5}
  api-requests-per-minute: ${RATE_LIMIT_API:100}
  burst-capacity: ${RATE_LIMIT_BURST:10}

cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000,http://localhost:8080}

security:
  account-lockout:
    max-attempts: ${SECURITY_MAX_ATTEMPTS:5}
    lockout-duration-minutes: ${SECURITY_LOCKOUT_DURATION:30}
    window-minutes: ${SECURITY_WINDOW_MINUTES:15}

